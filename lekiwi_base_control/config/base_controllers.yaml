controller_manager:
  ros__parameters:
    update_rate: 50  # Hz
    statistics_publish_rate: 0.0  # Disable /controller_manager/statistics/* topics
    
    # Command and error handling
    enforce_command_limits: false  # Allow controller to manage limits (relaxed enforcement)
    handle_exceptions: true       # Graceful error handling
    
    # Hardware component initialization
    defaults:
      switch_controller:
        strictness: strict
      allow_controller_activation_with_inactive_hardware: false
      deactivate_controllers_on_hardware_self_deactivate: true

    joint_state_broadcaster:
      type: joint_state_broadcaster/JointStateBroadcaster

    base_controller:
      type: omni_wheel_drive_controller/OmniWheelDriveController

joint_state_broadcaster:
  ros__parameters:
    joints:
      - left_wheel_joint
      - back_wheel_joint
      - right_wheel_joint
    # Standard state interfaces (position, velocity, effort) are automatically mapped
    # Only list custom interfaces here
    interfaces:
      - voltage
      - temperature
      - current
      - is_moving

base_controller:
  ros__parameters:
    # Wheel geometry - 3 wheels at 60°, 180°, 300° from +X axis
    wheel_offset: 1.0471975511965976  # 60° in radians (π/3 exactly)
    wheel_names:
      - left_wheel_joint   # 60° from +X
      - back_wheel_joint   # 180° from +X (60° + 120°)
      - right_wheel_joint  # 300° from +X (60° + 240°)

    # Robot dimensions
    robot_radius: 0.132239  # meters (distance from center to wheel contact point)
    wheel_radius: 0.051  # meters

    # Frame IDs
    odom_frame_id: odom
    base_frame_id: base_footprint

    # Odometry settings
    enable_odom_tf: true
    open_loop: false  # Use wheel feedback for odometry
    position_feedback: false  # Use velocity-based odometry when false

    # Command timeout
    cmd_vel_timeout: 0.5  # seconds

    # Velocity and Acceleration limits (based on omnidirectional kinematics)
    # NOTE: These values must match (or be less than) the URDF calculations in base.urdf.xacro
    # NOTE: These values can be overridden in the launch file
    linear:
      x:
        max_velocity: 0.245  # m/s
        max_acceleration: 2  # m/s^2
      y:
        max_velocity: 0.215  # m/s
        max_acceleration: 1.5  # m/s^2
    angular:
      z:
        max_velocity: 1.57  # rad/s (π/2, rounded down)
        max_acceleration: 12.5  # rad/s^2